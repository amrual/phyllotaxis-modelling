:root{--bg-parchment: #F9F5E9;--bg-parchment-dark: #F3E6C9;--bg-sidebar: #F5EDD8;--bg-section: #FFFDF7;--bg-input: #FFFEFB;--bg-canvas: #F7F3E6;--text-primary: #1F2A22;--text-secondary: #4A5D4E;--text-muted: #6B7E6F;--green-dark: #365541;--green-mid: #375D42;--green-light: #587852;--green-pale: #8FA889;--gold: #C9A227;--gold-light: #EEDCB0;--gold-border: rgba(201, 162, 39, .4);--gold-glow: rgba(201, 162, 39, .15);--error: #A94442;--error-bg: rgba(169, 68, 66, .1);--warning: #8A6D3B;--warning-bg: rgba(138, 109, 59, .1);--success: #3C763D;--border-light: rgba(201, 162, 39, .25);--border-medium: rgba(201, 162, 39, .4);--shadow-soft: 0 2px 8px rgba(31, 42, 34, .06);--shadow-card: 0 2px 12px rgba(31, 42, 34, .08);--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--font-body: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;--font-heading: Georgia, "Times New Roman", serif;--font-mono: "SF Mono", Monaco, Consolas, "Liberation Mono", monospace;--space-xs: 4px;--space-sm: 8px;--space-md: 12px;--space-lg: 16px;--space-xl: 24px;--header-height: 64px}*{margin:0;padding:0;box-sizing:border-box}html,body{width:100%;height:100%;overflow:hidden;background:var(--bg-parchment);font-family:var(--font-body);font-size:13px;color:var(--text-primary);line-height:1.5}#site-header{position:sticky;top:0;z-index:50;background:#f9f5e9f2;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-bottom:1px solid rgba(238,220,176,.5);font-family:"Crimson Pro",var(--font-heading);font-size:16px}.header-inner{max-width:72rem;margin:0 auto;padding:0 16px;height:var(--header-height);display:flex;align-items:center;justify-content:space-between}@media (min-width: 640px){.header-inner{padding:0 24px}}.site-logo{font-size:18px;font-weight:600;color:#365541;letter-spacing:.025em;text-decoration:none;transition:color .2s ease}@media (min-width: 640px){.site-logo{font-size:20px}}.site-logo:hover{color:#375d42}.site-nav{display:flex;align-items:center;gap:32px}.site-nav a{position:relative;font-size:16px;color:#3d4a40;text-decoration:none;padding:4px 0;transition:color .2s ease}.site-nav a:after{content:"";position:absolute;left:0;right:0;bottom:0;height:2px;background:#d4c08a;transform:scaleX(0);transform-origin:center;transition:transform .2s ease}.site-nav a.is-active{color:#1f2a22}.site-nav a.is-active:after{transform:scaleX(1)}.site-nav a:hover{color:#1f2a22}.site-nav a:hover:after{transform:scaleX(1)}.site-nav--desktop{display:none}@media (min-width: 768px){.site-nav--desktop{display:flex}}.mobile-nav-toggle{position:absolute;opacity:0;pointer-events:none}.mobile-nav-button{display:inline-flex;align-items:center;justify-content:center;padding:8px;color:#3d4a40;cursor:pointer;transition:color .2s ease}@media (min-width: 768px){.mobile-nav-button{display:none}}.mobile-nav-button:hover{color:#1f2a22}.mobile-nav-icon{width:24px;height:24px}.icon-x{display:none}.mobile-nav-toggle:checked~.header-inner .icon-bars{display:none}.mobile-nav-toggle:checked~.header-inner .icon-x{display:inline}.site-nav--mobile{display:none;flex-direction:column;gap:8px;padding:16px;border-top:1px solid rgba(238,220,176,.3)}@media (min-width: 768px){.site-nav--mobile{display:none!important}}#mobile-nav-toggle:checked~.site-nav--mobile{display:flex}.site-nav--mobile a{padding:8px 12px;border-radius:6px;color:#3d4a40}.site-nav--mobile a:hover{color:#1f2a22;background:#8fa88940}#app{display:flex;width:100%;height:calc(100vh - var(--header-height))}#sidebar{width:280px;min-width:280px;height:100%;background:var(--bg-sidebar);border-right:1px solid var(--border-light);overflow-y:auto;padding:var(--space-lg);background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");background-blend-mode:soft-light;background-size:200px 200px}#main{flex:1;height:100%;position:relative;background:var(--bg-canvas);background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"),radial-gradient(circle at center,transparent 10%,transparent 20%,rgba(201,162,39,.04) 20.5%,transparent 21%),radial-gradient(circle at center,transparent 30%,transparent 40%,rgba(201,162,39,.03) 40.5%,transparent 41%),radial-gradient(circle at center,transparent 50%,transparent 60%,rgba(201,162,39,.025) 60.5%,transparent 61%),radial-gradient(circle at center,transparent 70%,transparent 80%,rgba(201,162,39,.02) 80.5%,transparent 81%),linear-gradient(90deg,transparent calc(50% - .5px),rgba(201,162,39,.06) 50%,transparent calc(50% + .5px)),linear-gradient(0deg,transparent calc(50% - .5px),rgba(201,162,39,.06) 50%,transparent calc(50% + .5px));background-blend-mode:soft-light,normal,normal,normal,normal,normal,normal;background-size:200px 200px,100% 100%,100% 100%,100% 100%,100% 100%,100% 100%,100% 100%}#canvas{display:block;width:100%;height:100%}.ui-section{margin-bottom:var(--space-lg);padding:var(--space-md);background:var(--bg-section);border:1px solid var(--border-light);border-radius:var(--radius-md);box-shadow:var(--shadow-soft)}.ui-section-title{font-family:var(--font-heading);font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:var(--green-mid);margin-bottom:var(--space-md);padding-bottom:var(--space-xs);border-bottom:1px solid var(--border-light)}.ui-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-sm)}.ui-row:last-child{margin-bottom:0}.ui-row label{color:var(--text-secondary);font-size:12px;min-width:85px}.ui-row input[type=number]{width:80px;padding:6px 8px;background:var(--bg-input);border:1px solid var(--border-light);border-radius:var(--radius-sm);color:var(--text-primary);font-size:12px;text-align:right;transition:border-color .2s ease,box-shadow .2s ease}.ui-row input[type=number]:hover{border-color:var(--border-medium)}.ui-row input[type=number]:focus{outline:none;border-color:var(--gold);box-shadow:0 0 0 3px var(--gold-glow)}.checkbox-row{justify-content:flex-start;gap:var(--space-sm)}.checkbox-row input[type=checkbox]{width:16px;height:16px;accent-color:var(--green-mid);cursor:pointer}.checkbox-row label{min-width:auto;cursor:pointer}.ui-select{width:100%;padding:8px 10px;background:var(--bg-input);border:1px solid var(--border-light);border-radius:var(--radius-sm);color:var(--text-primary);font-size:12px;cursor:pointer;transition:border-color .2s ease,box-shadow .2s ease}.ui-select:hover{border-color:var(--border-medium)}.ui-select:focus{outline:none;border-color:var(--gold);box-shadow:0 0 0 3px var(--gold-glow)}.ui-label{display:block;color:var(--text-secondary);font-size:12px;margin-bottom:6px}.btn{padding:8px 14px;background:var(--bg-input);border:1px solid var(--border-light);border-radius:var(--radius-md);color:var(--text-primary);font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease}.btn:hover:not(:disabled){background:var(--bg-parchment-dark);border-color:var(--border-medium)}.btn:focus{outline:none;border-color:var(--gold);box-shadow:0 0 0 3px var(--gold-glow)}.btn:disabled{opacity:.5;cursor:not-allowed}.btn.primary{background:var(--green-mid);border-color:var(--green-dark);color:#fffdf7;font-weight:600}.btn.primary:hover:not(:disabled){background:var(--green-dark)}.btn.primary:focus{box-shadow:0 0 0 3px #375d424d}.btn-small{padding:6px 10px;font-size:11px}.buttons{display:flex;gap:6px;flex-wrap:wrap}.apply-btn{width:100%;margin-top:var(--space-sm);background:var(--gold);border:1px solid var(--gold);color:var(--text-primary);font-weight:600}.apply-btn:hover:not(:disabled){background:#b8931f;border-color:#b8931f}.apply-btn:focus{box-shadow:0 0 0 3px var(--gold-glow)}.custom-expr-input{width:100%;height:60px;padding:8px;background:var(--bg-input);border:1px solid var(--border-light);border-radius:var(--radius-sm);color:var(--text-primary);font-family:var(--font-mono);font-size:12px;resize:vertical;margin-bottom:6px;transition:border-color .2s ease,box-shadow .2s ease}.custom-expr-input:hover{border-color:var(--border-medium)}.custom-expr-input:focus{outline:none;border-color:var(--gold);box-shadow:0 0 0 3px var(--gold-glow)}.expr-validation{font-size:11px;margin-bottom:var(--space-sm);min-height:16px}.expr-validation.valid{color:var(--success)}.expr-validation.error{color:var(--error)}.expr-help{font-size:10px;color:var(--text-muted);line-height:1.4;margin-top:var(--space-sm);padding:var(--space-sm);background:var(--bg-parchment);border-radius:var(--radius-sm);border:1px dashed var(--border-light)}.field-plot-section{padding:var(--space-sm)}#field-plot-canvas{width:100%;height:60px;border-radius:var(--radius-sm);background:var(--bg-parchment-dark);border:1px solid var(--border-light)}#validation-messages{padding:0 var(--space-xs)}.validation-error{padding:8px 10px;margin-bottom:6px;background:var(--error-bg);border:1px solid var(--error);border-radius:var(--radius-sm);color:var(--error);font-size:11px}.validation-warning{padding:8px 10px;margin-bottom:6px;background:var(--warning-bg);border:1px solid var(--warning);border-radius:var(--radius-sm);color:var(--warning);font-size:11px}#sidebar::-webkit-scrollbar{width:8px}#sidebar::-webkit-scrollbar-track{background:var(--bg-sidebar)}#sidebar::-webkit-scrollbar-thumb{background:var(--gold-light);border-radius:4px;border:2px solid var(--bg-sidebar)}#sidebar::-webkit-scrollbar-thumb:hover{background:var(--gold)}@media (max-width: 700px){:root{--header-height: 64px}#sidebar{width:240px;min-width:240px;font-size:12px}}@media (max-width: 500px){#sidebar{width:200px;min-width:200px}.header-nav a{font-size:12px;padding:4px 6px}}
